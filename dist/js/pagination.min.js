"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};!function(n,J){function r(a){throw new Error("Pagination: "+a)}void 0===J&&r("Pagination requires jQuery.");var s="pagination",l="__pagination-";J.fn.pagination&&(s="pagination2"),J.fn[s]=function(a){if(void 0===a)return this;var t,e,p=J(this),D=J.extend({},J.fn[s].defaults,a),o={initialize:function(){var t=this;if(p.data("pagination")||p.data("pagination",{}),!1!==t.callHook("beforeInit")){p.data("pagination").initialized&&J(".paginationjs",p).remove(),t.disabled=!!D.disabled;var o=t.model={pageRange:D.pageRange,pageSize:D.pageSize};t.parseDataSource(D.dataSource,function(a){if(t.isAsync=d.isString(a),d.isArray(a)&&(o.totalNumber=D.totalNumber=a.length),t.isDynamicTotalNumber=t.isAsync&&D.totalNumberLocator,!(D.hideWhenLessThanOnePage&&t.getTotalPage()<=1)){var e=t.render(!0);D.className&&e.addClass(D.className),o.el=e,p["bottom"===D.position?"append":"prepend"](e),t.observer(),p.data("pagination").initialized=!0,t.callHook("afterInit",e)}})}},render:function(a){var e=this,t=e.model,o=t.el||J('<div class="paginationjs"></div>'),i=!0!==a;e.callHook("beforeRender",i);var n=t.pageNumber||D.pageNumber,r=D.pageRange,s=e.getTotalPage(),l=n-r,u=n+r;return s<u&&(l=(l=(u=s)-2*r)<1?1:l),l<=1&&(l=1,u=Math.min(2*r+1,s)),o.html(e.generateHTML({currentPage:n,pageRange:r,rangeStart:l,rangeEnd:u})),e.callHook("afterRender",i),o},generateHTML:function(a){var e,t=this,o=a.currentPage,i=t.getTotalPage(),n=a.rangeStart,r=a.rangeEnd,s=t.getTotalNumber(),l=D.showPrevious,u=D.showNext,c=D.showPageNumbers,g=D.showNavigator,p=D.showGoInput,d=D.showGoButton,f=D.pageLink,m=D.prevText,b=D.nextText,h=D.ellipsisText,v=D.goButtonText,N=D.classPrefix,y=D.activeClassName,k=D.disableClassName,P=D.ulClassName,S="",x='<input type="text" class="J-paginationjs-go-pagenumber">',j='<input type="button" class="J-paginationjs-go-button" value="'+v+'">',w=J.isFunction(D.formatNavigator)?D.formatNavigator(o,i,s):D.formatNavigator,T=J.isFunction(D.formatGoInput)?D.formatGoInput(x,o,i,s):D.formatGoInput,H=J.isFunction(D.formatGoButton)?D.formatGoButton(j,o,i,s):D.formatGoButton,F=J.isFunction(D.autoHidePrevious)?D.autoHidePrevious():D.autoHidePrevious,C=J.isFunction(D.autoHideNext)?D.autoHideNext():D.autoHideNext,O=J.isFunction(D.header)?D.header(o,i,s):D.header,L=J.isFunction(D.footer)?D.footer(o,i,s):D.footer;if(O&&(S+=t.replaceVariables(O,{currentPage:o,totalPage:i,totalNumber:s})),l||c||u){if(S+='<div class="paginationjs-pages">',S+=P?'<ul class="'+P+'">':"<ul>",l&&(o<=1?F||(S+='<li class="'+N+"-prev "+k+'"><a>'+m+"</a></li>"):S+='<li class="'+N+'-prev J-paginationjs-previous" data-num="'+(o-1)+'" title="Previous page"><a href="'+f+'">'+m+"</a></li>"),c){if(n<=3)for(e=1;e<n;e++)S+=e==o?'<li class="'+N+"-page J-paginationjs-page "+y+'" data-num="'+e+'"><a>'+e+"</a></li>":'<li class="'+N+'-page J-paginationjs-page" data-num="'+e+'"><a href="'+f+'">'+e+"</a></li>";else D.showFirstOnEllipsisShow&&(S+='<li class="'+N+"-page "+N+'-first J-paginationjs-page" data-num="1"><a href="'+f+'">1</a></li>'),S+='<li class="'+N+"-ellipsis "+k+'"><a>'+h+"</a></li>";for(e=n;e<=r;e++)S+=e==o?'<li class="'+N+"-page J-paginationjs-page "+y+'" data-num="'+e+'"><a>'+e+"</a></li>":'<li class="'+N+'-page J-paginationjs-page" data-num="'+e+'"><a href="'+f+'">'+e+"</a></li>";if(i-2<=r)for(e=r+1;e<=i;e++)S+='<li class="'+N+'-page J-paginationjs-page" data-num="'+e+'"><a href="'+f+'">'+e+"</a></li>";else S+='<li class="'+N+"-ellipsis "+k+'"><a>'+h+"</a></li>",D.showLastOnEllipsisShow&&(S+='<li class="'+N+"-page "+N+'-last J-paginationjs-page" data-num="'+i+'"><a href="'+f+'">'+i+"</a></li>")}u&&(i<=o?C||(S+='<li class="'+N+"-next "+k+'"><a>'+b+"</a></li>"):S+='<li class="'+N+'-next J-paginationjs-next" data-num="'+(o+1)+'" title="Next page"><a href="'+f+'">'+b+"</a></li>"),S+="</ul></div>"}return g&&w&&(S+='<div class="'+N+'-nav J-paginationjs-nav">'+t.replaceVariables(w,{currentPage:o,totalPage:i,totalNumber:s})+"</div>"),p&&T&&(S+='<div class="'+N+'-go-input">'+t.replaceVariables(T,{currentPage:o,totalPage:i,totalNumber:s,input:x})+"</div>"),d&&H&&(S+='<div class="'+N+'-go-button">'+t.replaceVariables(H,{currentPage:o,totalPage:i,totalNumber:s,button:j})+"</div>"),L&&(S+=t.replaceVariables(L,{currentPage:o,totalPage:i,totalNumber:s})),S},findTotalNumberFromRemoteResponse:function(a){this.model.totalNumber=D.totalNumberLocator(a)},go:function(a,t){function e(a){if(!1===o.callHook("beforePaging",n))return!1;if(i.direction=void 0===i.pageNumber?0:n>i.pageNumber?1:-1,i.pageNumber=n,o.render(),o.disabled&&o.isAsync&&o.enable(),p.data("pagination").model=i,D.formatResult){var e=J.extend(!0,[],a);d.isArray(a=D.formatResult(e))||(a=e)}p.data("pagination").currentPageData=a,o.doCallback(a,t),o.callHook("afterPaging",n),1==n&&o.callHook("afterIsFirstPage"),n==o.getTotalPage()&&o.callHook("afterIsLastPage")}var o=this,i=o.model;if(!o.disabled){var n=a;if((n=parseInt(n))&&!(n<1)){var r=D.pageSize,s=o.getTotalNumber(),l=o.getTotalPage();if(!(0<s&&l<n)){if(!o.isAsync)return void e(o.getDataFragment(n));var u={},c=D.alias||{};u[c.pageSize?c.pageSize:"pageSize"]=r,u[c.pageNumber?c.pageNumber:"pageNumber"]=n;var g={type:"get",cache:!1,data:{},contentType:"application/x-www-form-urlencoded; charset=UTF-8",dataType:"json",async:!0};J.extend(!0,g,D.ajax),J.extend(g.data,u),g.url=D.dataSource,g.success=function(a){o.isDynamicTotalNumber?o.findTotalNumberFromRemoteResponse(a):o.model.totalNumber=D.totalNumber,e(o.filterDataByLocator(a))},g.error=function(a,e,t){D.formatAjaxError&&D.formatAjaxError(a,e,t),o.enable()},o.disable(),J.ajax(g)}}}},doCallback:function(a,e){var t=this.model;J.isFunction(e)?e(a,t):J.isFunction(D.callback)&&D.callback(a,t)},destroy:function(){!1!==this.callHook("beforeDestroy")&&(this.model.el.remove(),p.off(),J("#paginationjs-style").remove(),this.callHook("afterDestroy"))},previous:function(a){this.go(this.model.pageNumber-1,a)},next:function(a){this.go(this.model.pageNumber+1,a)},disable:function(){var a=this,e=a.isAsync?"async":"sync";!1!==a.callHook("beforeDisable",e)&&(a.disabled=!0,a.model.disabled=!0,a.callHook("afterDisable",e))},enable:function(){var a=this,e=a.isAsync?"async":"sync";!1!==a.callHook("beforeEnable",e)&&(a.disabled=!1,a.model.disabled=!1,a.callHook("afterEnable",e))},refresh:function(a){this.go(this.model.pageNumber,a)},show:function(){this.model.el.is(":visible")||this.model.el.show()},hide:function(){this.model.el.is(":visible")&&this.model.el.hide()},replaceVariables:function(a,e){var t;for(var o in e){var i=e[o],n=new RegExp("<%=\\s*"+o+"\\s*%>","img");t=(t||a).replace(n,i)}return t},getDataFragment:function(a){var e=D.pageSize,t=D.dataSource,o=this.getTotalNumber(),i=e*(a-1)+1,n=Math.min(a*e,o);return t.slice(i-1,n)},getTotalNumber:function(){return this.model.totalNumber||D.totalNumber||0},getTotalPage:function(){return Math.ceil(this.getTotalNumber()/D.pageSize)},getLocator:function(a){var e;return"string"==typeof a?e=a:J.isFunction(a)?e=a():r('"locator" is incorrect. (String | Function)'),e},filterDataByLocator:function(t){var o,a=this.getLocator(D.locator);if(d.isObject(t)){try{J.each(a.split("."),function(a,e){o=(o||t)[e]})}catch(t){}o?d.isArray(o)||r("dataSource."+a+" must be an Array."):r("dataSource."+a+" is undefined.")}return o||t},parseDataSource:function(a,e){var t=this;d.isObject(a)?e(D.dataSource=t.filterDataByLocator(a)):d.isArray(a)?e(D.dataSource=a):J.isFunction(a)?D.dataSource(function(a){d.isArray(a)||r('The parameter of "done" Function should be an Array.'),t.parseDataSource.call(t,a,e)}):"string"==typeof a?(/^https?|file:/.test(a)&&(D.ajaxDataType="jsonp"),e(a)):r('Unexpected type of "dataSource".')},callHook:function(a){var t,e=p.data("pagination"),o=Array.prototype.slice.apply(arguments);return o.shift(),D[a]&&J.isFunction(D[a])&&!1===D[a].apply(n,o)&&(t=!1),e.hooks&&e.hooks[a]&&J.each(e.hooks[a],function(a,e){!1===e.apply(n,o)&&(t=!1)}),!1!==t},observer:function(){var o=this,t=o.model.el;p.on(l+"go",function(a,e,t){(e=parseInt(J.trim(e)))&&(J.isNumeric(e)||r('"pageNumber" is incorrect. (Number)'),o.go(e,t))}),t.delegate(".J-paginationjs-page","click",function(a){var e=J(a.currentTarget),t=J.trim(e.attr("data-num"));if(t&&!e.hasClass(D.disableClassName)&&!e.hasClass(D.activeClassName))return!1!==o.callHook("beforePageOnClick",a,t)&&(o.go(t),o.callHook("afterPageOnClick",a,t),!!D.pageLink&&void 0)}),t.delegate(".J-paginationjs-previous","click",function(a){var e=J(a.currentTarget),t=J.trim(e.attr("data-num"));if(t&&!e.hasClass(D.disableClassName))return!1!==o.callHook("beforePreviousOnClick",a,t)&&(o.go(t),o.callHook("afterPreviousOnClick",a,t),!!D.pageLink&&void 0)}),t.delegate(".J-paginationjs-next","click",function(a){var e=J(a.currentTarget),t=J.trim(e.attr("data-num"));if(t&&!e.hasClass(D.disableClassName))return!1!==o.callHook("beforeNextOnClick",a,t)&&(o.go(t),o.callHook("afterNextOnClick",a,t),!!D.pageLink&&void 0)}),t.delegate(".J-paginationjs-go-button","click",function(a){var e=J(".J-paginationjs-go-pagenumber",t).val();if(!1===o.callHook("beforeGoButtonOnClick",a,e))return!1;p.trigger(l+"go",e),o.callHook("afterGoButtonOnClick",a,e)}),t.delegate(".J-paginationjs-go-pagenumber","keyup",function(a){if(13===a.which){var e=J(a.currentTarget).val();if(!1===o.callHook("beforeGoInputOnEnter",a,e))return!1;p.trigger(l+"go",e),J(".J-paginationjs-go-pagenumber",t).focus(),o.callHook("afterGoInputOnEnter",a,e)}}),p.on(l+"previous",function(a,e){o.previous(e)}),p.on(l+"next",function(a,e){o.next(e)}),p.on(l+"disable",function(){o.disable()}),p.on(l+"enable",function(){o.enable()}),p.on(l+"refresh",function(a,e){o.refresh(e)}),p.on(l+"show",function(){o.show()}),p.on(l+"hide",function(){o.hide()}),p.on(l+"destroy",function(){o.destroy()});var a=Math.max(o.getTotalPage(),1),e=D.pageNumber;o.isDynamicTotalNumber&&(e=1),D.triggerPagingOnInit&&p.trigger(l+"go",Math.min(e,a))}};if(p.data("pagination")&&!0===p.data("pagination").initialized){if(J.isNumeric(a))return p.trigger.call(this,l+"go",a,arguments[1]),this;if("string"==typeof a){var i=Array.prototype.slice.apply(arguments);switch(i[0]=l+i[0],a){case"previous":case"next":case"go":case"disable":case"enable":case"refresh":case"show":case"hide":case"destroy":p.trigger.apply(this,i);break;case"getSelectedPageNum":return p.data("pagination").model?p.data("pagination").model.pageNumber:p.data("pagination").attributes.pageNumber;case"getTotalPage":return Math.ceil(p.data("pagination").model.totalNumber/p.data("pagination").model.pageSize);case"getSelectedPageData":return p.data("pagination").currentPageData;case"isDisabled":return!0===p.data("pagination").model.disabled;default:r("Unknown action: "+a)}return this}t=p,J.each(["go","previous","next","disable","enable","refresh","show","hide","destroy"],function(a,e){t.off(l+e)}),t.data("pagination",{}),J(".paginationjs",t).remove()}else d.isObject(a)||r("Illegal options");return(e=D).dataSource||r('"dataSource" is required.'),"string"==typeof e.dataSource?void 0===e.totalNumberLocator?void 0===e.totalNumber?r('"totalNumber" is required.'):J.isNumeric(e.totalNumber)||r('"totalNumber" is incorrect. (Number)'):J.isFunction(e.totalNumberLocator)||r('"totalNumberLocator" should be a Function.'):d.isObject(e.dataSource)&&(void 0===e.locator?r('"dataSource" is an Object, please specify "locator".'):"string"==typeof e.locator||J.isFunction(e.locator)||r(e.locator+" is incorrect. (String | Function)")),void 0===e.formatResult||J.isFunction(e.formatResult)||r('"formatResult" should be a Function.'),o.initialize(),this},J.fn[s].defaults={totalNumber:0,pageNumber:1,pageSize:10,pageRange:2,showPrevious:!0,showNext:!0,showPageNumbers:!0,showNavigator:!1,showGoInput:!1,showGoButton:!1,pageLink:"",prevText:"&laquo;",nextText:"&raquo;",ellipsisText:"...",goButtonText:"Go",classPrefix:"paginationjs",activeClassName:"active",disableClassName:"disabled",inlineStyle:!0,formatNavigator:"<%= currentPage %> / <%= totalPage %>",formatGoInput:"<%= input %>",formatGoButton:"<%= button %>",position:"bottom",autoHidePrevious:!1,autoHideNext:!1,triggerPagingOnInit:!0,hideWhenLessThanOnePage:!1,showFirstOnEllipsisShow:!0,showLastOnEllipsisShow:!0,callback:function(){}},J.fn.addHook=function(a,e){arguments.length<2&&r("Missing argument."),J.isFunction(e)||r("callback must be a function.");var t=J(this),o=t.data("pagination");o||(t.data("pagination",{}),o=t.data("pagination")),!o.hooks&&(o.hooks={}),o.hooks[a]=o.hooks[a]||[],o.hooks[a].push(e)},J[s]=function(a,e){var t;if(arguments.length<2&&r("Requires two parameters."),(t="string"!=typeof a&&a instanceof jQuery?a:J(a)).length)return t.pagination(e),t};var d={};J.each(["Object","Array","String"],function(a,o){d["is"+o]=function(a){return("object"==(t=void 0===(e=a)?"undefined":_typeof(e))?null==e?"null":Object.prototype.toString.call(e).slice(8,-1):t).toLowerCase()===o.toLowerCase();var e,t}}),"function"==typeof define&&define.amd&&define(function(){return J})}(void 0,window.jQuery);